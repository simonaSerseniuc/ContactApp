!function(){"use strict";var app=angular.module("contactsApp",["ui.bootstrap","ngRoute"]);app.config(function($routeProvider){$routeProvider.when("/contacts",{controller:"contactListController",templateUrl:"app/contact/list/contact.list.html"}).when("/contacts/:index",{controller:"contactDetailsController",templateUrl:"app/contact/details/contact.details.html"}).otherwise({redirectTo:"/contacts"})})}(),function(){"use strict";var app=angular.module("contactsApp"),config={url:"http://www.mocky.io/v2/"};app.constant("config",config)}(),function(){"use strict";var app=angular.module("contactsApp");app.filter("capitalize",function(){return function(input,all){var reg=all?/([^\W_]+[^\s-]*) */g:/([^\W_]+[^\s-]*)/;return input?input.replace(reg,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()}):""}})}(),function(){"use strict";function contactService($http,config){function setContact(contact){currentContact=contact}function getCurrent(){return currentContact}function addContact(contact){contacts.push(contact)}function getContacts(callBackFn){contacts.length?callBackFn(contacts):requestContacts(callBackFn)}function requestContacts(callBackFn){$http({method:"GET",url:config.url+"58088826100000e9232b75b0",headers:{"Access-Control-Allow-Origin":"*"}}).success(function(result){result.length&&(contacts=result,callBackFn(contacts))}).error(function(result){var status=result.status;5==status.toString()[0]?alert("An unexpected error occured on the server"):alert("An error occured. Please try again"),callBackFn([])})}var currentContact=null,contacts=[],factory={getContacts:getContacts,setContact:setContact,getCurrent:getCurrent,addContact:addContact};return factory}var app=angular.module("contactsApp");app.factory("contactService",["$http","config",contactService])}(),function(){"use strict";function contactDetailsController($scope,$location,$routeParams,contactService){function init(){var current=contactService.getCurrent();null!==current?$scope.contact=current:"empty"!=param&&contactService.getContacts(function(result){$scope.contact=result[param]})}$scope.contact={name:"",job:"",email:"",location:"",avatar:"",tag:""};var param=$routeParams.index;init(),$scope.saveContact=function(){var contact=$scope.contact;"empty"==param&&(contact.avatar="http://www.cbc.ca/smartestperson/content/image/avatar-placeholder.png",contactService.addContact(contact)),$location.path("/contacts")},$scope.newContact=function(){contactService.setContact(null),$location.path("/contacts/empty")}}var app=angular.module("contactsApp");app.controller("contactDetailsController",["$scope","$location","$routeParams","contactService",contactDetailsController])}(),function(){"use strict";function contactListController($scope,$location,contactService){function getContacts(){contactService.getContacts(function(result){$scope.contacts=result})}$scope.contacts=[],getContacts(),$scope.moreDetails=function(index){var selected=$scope.contacts[index];contactService.setContact(selected),$location.path("/contacts/"+index)},$scope.newContact=function(){contactService.setContact(null),$location.path("/contacts/empty")}}var app=angular.module("contactsApp");app.controller("contactListController",["$scope","$location","contactService",contactListController])}();